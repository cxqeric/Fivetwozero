webpackJsonp([2],{"+l/j":function(e,t){},"0iPh":function(e,t){e.exports=jQuery},"0urM":function(e,t){},"2qwd":function(e,t){},"4dM5":function(e,t){},"8aHH":function(e,t){},"9mHk":function(e,t){},DkGi:function(e,t){},EI9l:function(e,t){},G8b2:function(e,t){e.exports=THREE.PLYLoader},Hl8l:function(e,t){e.exports=Potree},K0YA:function(e,t){},LaKM:function(e,t,i){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"space"},[t("div",{staticClass:"stars"},[t("div",{staticClass:"star"}),this._v(" "),t("div",{staticClass:"star pink"}),this._v(" "),t("div",{staticClass:"star blue"}),this._v(" "),t("div",{staticClass:"star yellow"})])])}]};var o=i("VU/8")({name:"MeteorBg"},n,!1,function(e){i("9mHk")},"data-v-7663648f",null);t.a=o.exports},MujW:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App",methods:{},mounted:function(){}},o,!1,function(e){i("hS29")},null,null).exports,s=i("/ocq"),l=i("j19T"),r={name:"Login",components:{MeteorBg:i("LaKM").a},data:function(){return{loginForm:{account:"",password:""},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{type:"string",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,min:6,max:10,message:"长度在 6 到 10 个字符",trigger:"blur"}]},loading:!1}},methods:{handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){t&&(e.loading=!0,e.$store.dispatch("LoginByUsername",e.loginForm).then(function(t){e.loading=!1,e.$message({message:l.a[t.data.status],duration:1500}),e.$router.push({path:"/layout/main"}).then()}).catch(function(t){e.loading=!1;var i="网络错误！";void 0!==t.response&&(i=l.a[t.response.data.status],705401===t.response.data.status&&e.$router.push({path:"/unconfirmed"}).then()),e.$message({message:i,duration:3e3})}))})},handleRegister:function(){this.$router.push({path:"/register"}).then()}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login_container"},[i("meteor-bg"),e._v(" "),i("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{rules:e.rules,"auto-complete":"on",model:e.loginForm}},[i("h3",{staticClass:"title",staticStyle:{color:"#fff","font-weight":"lighter","margin-bottom":"60px"}},[e._v("盘煤后台管理系统")]),e._v(" "),i("el-form-item",{attrs:{prop:"account"}},[i("el-input",{attrs:{placeholder:"账号","prefix-icon":"iconfont icon-my"},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password",placeholder:"密码","prefix-icon":"iconfont icon-unlock"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"5px"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading,size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1),e._v(" "),i("el-form-item",[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister(t)}}},[e._v("注册")])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(r,c,!1,function(e){i("piiL")},null,null).exports,f=i("Dd8w"),d=i.n(f),_=i("NYxO"),m={name:"Hamburger",props:{isActive:{type:Boolean,default:!1},toggleClick:{type:Function,default:null}}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("svg",{staticClass:"hamburger",class:{"is-active":this.isActive},attrs:{t:"1492500959545",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1691","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:this.toggleClick}},[t("path",{attrs:{d:"M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z","p-id":"1692"}}),this._v(" "),t("path",{attrs:{d:"M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z","p-id":"1693"}}),this._v(" "),t("path",{attrs:{d:"M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z","p-id":"1694"}})])])},staticRenderFns:[]};var h={name:"Navbar",components:{Hamburger:i("VU/8")(m,p,!1,function(e){i("tIBG")},null,null).exports},computed:d()({},Object(_.b)(["sidebar"]),{coal_info:function(){return this.$store.state.coal.current_coal_info},file_info:function(){return this.$store.state.coal.current_file_info}}),methods:{toggleSideBar:function(){this.$store.dispatch("toggleSideBar").then()},logout:function(){var e=this;this.$store.dispatch("Logout").then(function(){e.$message({message:"退出成功！",duration:1500}),e.$router.push({path:"/"}).then()})}},watch:{$route:function(){console.log(this.$route.path)}}},v={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navbar"},[i("hamburger",{staticClass:"hamburger-container",attrs:{"toggle-click":e.toggleSideBar,"is-active":e.sidebar.opened,hidden:""}}),e._v(" "),i("div",{staticClass:"logo"},[e._v("SINOK")]),e._v(" "),i("div",{staticClass:"right-menu"},[i("label",{staticStyle:{"font-size":"xx-small"}},[e._v("\n    运行周期 "),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(e.coal_info.scan_interval)+e._s(e.coal_info.interval_type)+")")]),e._v("\n    开始时间 "),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(new Date(e.coal_info.base_time).toLocaleString())+")")]),e._v("\n    运行模式 "),i("span",{staticStyle:{color:"red"}},[e._v("\n              ("),!0===e.coal_info.auto_scan?i("span",[e._v("自动")]):i("span",[e._v("手动")]),e._v(")\n            ")]),e._v("\n    当前状态 "),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(e.file_info.status)+")")]),e._v("\n    当前体积 "),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(Number(e.file_info.volume).toFixed(e.coal_info.display_accuracy))+" 立方米)")]),e._v("\n    当前密度 "),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(e.file_info.density)+" Kg/立方米)")])]),e._v(" "),i("el-dropdown",{staticClass:"avatar-container right-menu-item",attrs:{size:"small",trigger:"click"}},[i("el-button",{attrs:{size:"small",circle:"",type:"text"}},[i("i",{staticClass:"iconfont icon-my"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("el-button",{attrs:{type:"text",size:"mini"}},[i("i",{staticClass:"iconfont icon-info",staticStyle:{"font-size":"xx-small"}}),e._v("用户信息")])],1),e._v(" "),i("el-dropdown-item",{attrs:{divided:""}},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.logout}},[i("i",{staticClass:"iconfont icon-forward",staticStyle:{"font-size":"xx-small"}}),e._v("退 出")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=i("VU/8")(h,v,!1,function(e){i("w0Q4")},"data-v-4db4ab3c",null).exports,b={name:"Sidebar",data:function(){return{group_list:[]}},computed:d()({},Object(_.b)(["permission_routers","sidebar"]),{isCollapse:function(){return!this.sidebar.opened}}),methods:{}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sidebar_container"},[i("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"border-right":"0px"},attrs:{router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF","default-active":"1",collapse:e.isCollapse}},[i("el-menu-item",{attrs:{index:"/layout/main"}},[i("i",{staticClass:"iconfont icon-home"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("主页")])]),e._v(" "),i("el-menu-item",{attrs:{index:"/layout/coal_yard_manage"}},[i("i",{staticClass:"iconfont icon-home"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("场景管理")])]),e._v(" "),i("el-menu-item",{attrs:{index:"/layout/device_manage"}},[i("i",{staticClass:"iconfont icon-Management"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("设备管理")])]),e._v(" "),i("el-menu-item",{attrs:{index:"/layout/data_manage"}},[i("i",{staticClass:"iconfont icon-file"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("数据管理")])]),e._v(" "),i("el-menu-item",{attrs:{index:"/layout/data_show"}},[i("i",{staticClass:"iconfont icon-model-lib"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("数据展示")])])],1)],1)},staticRenderFns:[]};var w=i("VU/8")(b,y,!1,function(e){i("TZgP")},"data-v-3e786ed5",null).exports,S={name:"AppMain",computed:{key:function(){return this.$route.fullPath}},methods:{on_connect:function(){console.log("connected")},on_error:function(){console.log("error")},callback:function(e){console.log(e)}},mounted:function(){}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"app-main",staticStyle:{"font-weight":"normal"}},[t("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[t("router-view",{key:this.key})],1)],1)},staticRenderFns:[]};var E=i("VU/8")(S,$,!1,function(e){i("kIzu")},"data-v-d9a63622",null).exports,x=i("lbHh"),k=i.n(x),C={state:{global:{current_coal:"",current_file:""},sidebar:{opened:!1,withoutAnimation:!1},device:"desktop",language:k.a.get("language")||"en",size:k.a.get("size")||"medium",upload_model_progress:0},mutations:{SET_CURRENT_FILE:function(e,t){e.global.current_file=t},TOGGLE_SIDEBAR:function(e){e.sidebar.opened?k.a.set("sidebarStatus",1):k.a.set("sidebarStatus",0),e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1},CLOSE_SIDEBAR:function(e,t){k.a.set("sidebarStatus",1),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t},SET_LANGUAGE:function(e,t){e.language=t,k.a.set("language",t)},SET_SIZE:function(e,t){e.size=t,k.a.set("size",t)},SET_UPLOAD_MODEL_PROGRESS:function(e,t){e.upload_model_progress=t}},actions:{toggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},closeSideBar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},toggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)},setLanguage:function(e,t){(0,e.commit)("SET_LANGUAGE",t)},setSize:function(e,t){(0,e.commit)("SET_SIZE",t)},setUploadModelProgress:function(e,t){(0,e.commit)("SET_UPLOAD_MODEL_PROGRESS",t)}}},L=i("//Fk"),O=i.n(L),T=i("mtWM"),z=i.n(T).a.create({baseURL:"http://47.113.82.212:8080/api/v1.0",timeout:5e4,withCredentials:!0});z.interceptors.request.use(function(e){return Z.getters.token,e},function(e){return console.log(e),O.a.reject(e)}),z.interceptors.response.use(function(e){return e},function(e){return O.a.reject(e)});var A=z;var N={state:{user:"",token:"",name:"",introduction:"",roles:[]},actions:{LoginByUsername:function(e,t){e.commit;var i=t.account.trim();return new O.a(function(e,n){(function(e,t){var i={username:e,password:t};return A.request({url:"/login",method:"post",data:i})})(i,t.password).then(function(t){e(t)}).catch(function(e){n(e)})})},UserRegister:function(e,t){e.commit;var i=t.account.trim();return new O.a(function(e,n){(function(e,t){var i={username:e,password:t};return A.request({url:"/register",method:"post",data:i})})(i,t.password).then(function(t){e(t)}).catch(function(e){n(e)})})},Logout:function(){return new O.a(function(e,t){A.request({url:"/logout",method:"post"}).then(function(t){e(t)}).catch(function(e){t(e)})})},SendConfirmEmail:function(e){e.commit;return new O.a(function(e,t){A.request({url:"/confirm",method:"post"}).then(function(t){e(t)}).catch(function(e){t(e)})})},Confirm:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/confirm/"+e,method:"post"})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})}}};var I={state:{update:!1,group_list:[],coalYard_list:[],current_group_info:{uuid:"",name:""},current_coal_info:{uuid:"",name:"",base_time:"",files:[{volume:null,surface_areas:null,created_time:""}]},current_file_info:{uuid:"",name:"",type:"",status:"等待采集",volume:0,surface_areas:0,created_time:"",denoise_time:"",mesh_time:"",calculate_time:""}},mutations:{SET_GROUP_LIST:function(e,t){e.group_list=t},SET_GROUP_INFO:function(e,t){e.current_group_info=t},UPDATE_GROUP:function(e,t){for(var i in e.group_list)e.group_list[i].uuid===t.group_id&&e.group_list[i].coal_yards.unshift(t)},SET_COAL_YARD_LIST:function(e,t){e.coalYard_list=t},SET_COAL_INFO:function(e,t){e.current_coal_info=t},UPDATE_COAL_LIST:function(e,t){e.coalYard_list.unshift(t)},SET_FILE_INFO:function(e,t){e.current_file_info=t}},actions:{getCoalYard:function(e,t){var i=e.commit,n=e.state;return new O.a(function(e,o){(function(e){return A.request({url:"/coal_yard/"+e,method:"get"})})(t).then(function(t){var o=JSON.parse(t.data.data);for(var a in i("SET_COAL_YARD_LIST",o),n.coalYard_list)n.current_coal_info.uuid===n.coalYard_list[a].uuid&&(n.current_coal_info=n.coalYard_list[a]);e(t)}).catch(function(e){o(e)})})},addCoalYard:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/coal_yard",method:"post",data:e})})(t).then(function(t){var n=JSON.parse(t.data.data);i("SET_COAL_INFO",n),i("SET_FILE_INFO",n.files[0]),i("UPDATE_GROUP",n),i("UPDATE_COAL_LIST",n),e(t)}).catch(function(e){n(e)})})},deleteCoalYard:function(e,t){e.commit;return new O.a(function(e,i){var n;(n=t,A.request({url:"/coal_yard/"+n,method:"delete"})).then(function(t){e(t)}).catch(function(e){i(e)})})},updateCoalYard:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e,t){return A.request({url:"/coal_yard/"+e,method:"put",data:t})})(t.uuid,t).then(function(t){var n=JSON.parse(t.data.data);i("SET_COAL_INFO",n),e(t)}).catch(function(e){n(e)})})},build:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/coal_yard/build/"+e,method:"post"})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})},getGroup:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/group/"+e,method:"get"})})(t).then(function(t){var n=JSON.parse(t.data.data);n.forEach(function(e){e.children=e.coal_yards}),i("SET_GROUP_LIST",n),e(t)}).catch(function(e){n(e)})})},addGroup:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/group",method:"post",data:e})})(t).then(function(t){var n=JSON.parse(t.data.data);n.forEach(function(e){e.children=e.coal_yards}),i("SET_GROUP_LIST",n),i("SET_GROUP_INFO",n[0]),e(t)}).catch(function(e){n(e)})})},deleteGroup:function(e,t){e.commit;return new O.a(function(e,i){var n;(n=t,A.request({url:"/group/"+n,method:"delete"})).then(function(t){e(t)}).catch(function(e){i(e)})})},getFile:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/file/"+e,method:"get"})})(t).then(function(t){var n=JSON.parse(t.data.data);i("SET_FILE_INFO",n),e(t)}).catch(function(e){n(e)})})},deleteFile:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/file/"+e,method:"delete"})})(t).then(function(t){var n=JSON.parse(t.data.data);i("SET_COAL_INFO",n),e(t)}).catch(function(e){n(e)})})},updateFile:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/file/"+e.uuid,method:"put",data:e})})(t).then(function(t){var n=JSON.parse(t.data.data);i("SET_FILE_INFO",n),e(t)}).catch(function(e){n(e)})})}}},D={sidebar:function(e){return e.app.sidebar},language:function(e){return e.app.language},size:function(e){return e.app.size},device:function(e){return e.app.device},upload_model_progress:function(e){return e.upload_model_progress}},F=i("0tEf"),R=i.n(F),P={state:{ws:"",client:""},mutations:{INIT_WS:function(e){e.ws=new WebSocket("ws://47.113.82.212:15674/ws"),e.client=R.a.over(e.ws)}},actions:{}},M=i("Hl8l"),V=i.n(M),U=i("0iPh"),q=i.n(U);var B=i("G8b2"),G=i.n(B),H=i("QTrw"),Y={state:{viewer:"",materials:"",measuringTool:"",setting:{mini_points:500},file_loading:!1},mutations:{SHOW_BASE_POINTS:function(e,t){var i=new V.a.Measure;i.name="Measurement",i.showDistances=!1,i.showArea=!1,i.showAngles=!1,i.showCoordinates=!1,i.showHeight=!1,i.closed=!0,t.forEach(function(e){i.addMarker(new H.Vector3(Number(e.x),Number(e.y),Number(e.z)))}),e.viewer.scene.addMeasurement(i)},setMinNodeSize:function(e,t){e.viewer.setMinNodeSize(parseInt(t))},INIT_POTREE:function(e){e.viewer=new V.a.Viewer(document.getElementById("potree_render_area")),e.measuringTool=new V.a.MeasuringTool(e.viewer),e.viewer.setEDLEnabled(!0),e.viewer.setFOV(60),e.viewer.setMinNodeSize(e.setting.mini_points),e.viewer.setBackground({r:255,g:255,b:255,a:0}),e.viewer.setPointBudget(1e6),e.viewer.loadSettingsFromURL(),e.viewer.setDescription(""),e.viewer.loadGUI(function(){e.viewer.setLanguage("en"),q()("#menu_appearance").next().show()})},LOAD_POINT_CLOUD:function(e,t){V.a.loadPointCloud(t,"points_cloud",function(t){e.viewer.scene.addPointCloud(t.pointcloud),e.material=t.pointcloud.material,e.material.size=1,e.material.pointColorType=V.a.PointColorType.ELEVATION,e.material.pointSizeType=V.a.PointSizeType.FIXED,e.viewer.fitToScreen(),e.file_loading=!1})},LOAD_MESH:function(e,t){(new G.a).load(t,function(t){t.computeVertexNormals();var i=t.boundingSphere.center,n=new H.MeshNormalMaterial,o=new H.Mesh(t,n);o.position.set(-i.x,-i.y,0),e.viewer.scene.scene.add(o),e.viewer.scene.view.position.set(2*i.x,2*i.y,5*i.z),e.viewer.scene.view.lookAt(new H.Vector3(0,0,0)),e.file_loading=!1})},POTREE_SCENE_CLEAR:function(e){e.viewer.scene.scene.children.forEach(function(t){"Mesh"===t.type&&e.viewer.scene.scene.children.pop()}),e.viewer.scene.pointclouds.forEach(function(t){e.viewer.scene.scenePointCloud.remove(t)}),e.viewer.scene.pointclouds=[]},SELECT_CLIP_POINTS:function(e){e.viewer.scene.removeAllMeasurements(),e.measuringTool.startInsertion({showDistances:!1,showArea:!1,closed:!0,name:"Area"})},REMOVE_ALL_CLIP_POINTS:function(e){e.viewer.scene.removeAllMeasurements()},SELECT_BASE_POINTS:function(e){e.viewer.scene.removeAllMeasurements(),e.measuringTool.startInsertion({showDistances:!1,showArea:!1,closed:!0,showAngles:!1,name:"Area"})},REMOVE_ALL_BASE_POINTS:function(e){e.viewer.scene.removeAllMeasurements()}},actions:{getPotreeFile:function(e,t){e.commit;var i=t.id,n=t.type,o=t.status;return new O.a(function(e,t){(function(e,t,i){return A.request({url:"/potree_file/"+e+"/"+t+"/"+i,method:"get"})})(i,n,o).then(function(t){e(t)}).catch(function(e){t(e)})})}}};var j={state:{device_list:[],all_iot_device_list:[]},mutations:{SET_DEVICE_LIST:function(e,t){e.device_list=t},SET_ALL_IOT_DEVICE_LIST:function(e,t){e.all_iot_device_list=t}},actions:{getDevice:function(e,t){var i=e.commit;return new O.a(function(e,n){(function(e){return A.request({url:"/device/"+e,method:"get"})})(t).then(function(t){var n=JSON.parse(t.data.data),o=1;n.forEach(function(e){e.id=o,o+=1}),i("SET_DEVICE_LIST",n),e(t)}).catch(function(e){n(e)})})},addDevice:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/device",method:"post",data:e})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})},deleteDevice:function(e,t){e.commit;return new O.a(function(e,i){var n;(n=t,A.request({url:"/device/"+n,method:"delete"})).then(function(t){e(t)}).catch(function(e){i(e)})})},updateDevice:function(e,t){e.commit;return new O.a(function(e,i){(function(e,t){return A.request({url:"/device/"+e,method:"put",data:t})})(t.uuid,t).then(function(t){e(t)}).catch(function(e){i(e)})})},getAllIotDevice:function(e){var t=e.commit;return new O.a(function(e,i){A.request({url:"/device/iot/all",method:"get"}).then(function(i){var n=[];JSON.parse(i.data.data).forEach(function(e){n.push(e.DeviceName)}),t("SET_ALL_IOT_DEVICE_LIST",n),e(i)}).catch(function(e){i(e)})})},test:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/device/test",method:"post",data:e})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})},setDeviceStatus:function(e,t){e.commit;var i=t.devices,n=t.id,o=t.action;return new O.a(function(e,t){(function(e,t,i){return A.request({url:"/devices/"+t+"/"+i,method:"post",data:e})})(i,n,o).then(function(t){e(t)}).catch(function(e){t(e)})})}}},W=i("mvHQ"),J=i.n(W);var K={state:{model_list:"",raw_list:"",data_list:""},mutations:{SET_MODEL_LIST:function(e,t){e.model_list=t},SET_RAW_LIST:function(e,t){e.raw_list=t},SET_DATA_LIST:function(e,t){e.data_list=t}},actions:{denoise:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/alg/denoise/"+e,method:"get"})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})},clip:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/alg/clip/"+e,method:"get"})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})},mesh:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/alg/mesh/"+e,method:"get"})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})},surfacevolume:function(e,t){e.commit;return new O.a(function(e,i){(function(e){return A.request({url:"/alg/surface_volume/"+e,method:"get"})})(t).then(function(t){e(t)}).catch(function(e){i(e)})})}}},Q={state:{},mutations:{},actions:{}};n.default.use(_.a);var Z=new _.a.Store({modules:{app:C,coal:I,user:N,stomp:P,potree:Y,device:j,alg:K,tools:Q},getters:D}),X=document.body,ee={name:"Layout",components:{Navbar:g,Sidebar:w,AppMain:E},mixins:[{watch:{$route:function(e){"mobile"===this.device&&this.sidebar.opened&&Z.dispatch("closeSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},mounted:function(){this.isMobile()&&(Z.dispatch("toggleDevice","mobile"),Z.dispatch("closeSideBar",{withoutAnimation:!0}))},methods:{isMobile:function(){return X.getBoundingClientRect().width-3<500},resizeHandler:function(){if(!document.hidden){var e=this.isMobile();Z.dispatch("toggleDevice",e?"mobile":"desktop"),e&&Z.dispatch("closeSideBar",{withoutAnimation:!0})}}}}],computed:{potree_loading:function(){return this.$store.state.potree.file_loading},sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device},classObj:function(){return{hideSidebar:!this.sidebar.opened,openSidebar:this.sidebar.opened,mobile:"mobile"===this.device}}}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-wrapper",class:this.classObj},[t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:this.potree_loading,expression:"potree_loading"}]},[t("el-header",{staticStyle:{height:"50px","z-index":"1"}},[t("navbar")],1),this._v(" "),t("el-aside",{staticStyle:{width:"inherit",display:"none"}},[t("sidebar",{staticClass:"sidebar-container"})],1),this._v(" "),t("el-main",[t("app-main")],1)],1)],1)},staticRenderFns:[]};var ie=i("VU/8")(ee,te,!1,function(e){i("4dM5")},"data-v-ebb5ab3e",null).exports,ne=i("BO1k"),oe=i.n(ne),ae={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"20%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",{staticStyle:{color:"#f26235","font-weight":"bolder"},attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-info1"}),e._v("\n    新建分组\n  ")]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"分组名称",size:"mini"}},[i("el-input",{attrs:{placeholder:"xx分组"},model:{value:e.info.name,callback:function(t){e.$set(e.info,"name",t)},expression:"info.name"}})],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.confirm}},[e._v("添 加")])],1)])},staticRenderFns:[]};var se=i("VU/8")({name:"AddGroup_Dialog",data:function(){return{dialogVisible:!1,dialogLoading:!1,info:{name:""}}},computed:{},methods:{confirm:function(){var e=this;""!==this.info.name?(this.dialogLoading=!0,this.$store.dispatch("addGroup",this.info).then(function(){}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.dialogLoading=!1,e.dialogVisible=!1})):this.$message({message:"分组名称不能为空！",duration:3e3})},handleClose:function(){this.dialogVisible=!1}}},ae,!1,function(e){i("ZcVb")},"data-v-320e687a",null).exports,le={name:"DeviceInfo",props:{current_file_info:{}},data:function(){return{current_iot_device:"",loading:!1,mask:!1,device_info:{uuid:"",name:"",product_key:"",topic:"",status:"stop",file_id:"",cfg:[0,0,0,0,0,0]},device_list:[]}},computed:{all_iot_device:function(){return this.$store.state.device.all_iot_device_list},file_info:function(){return this.current_file_info}},methods:{read:function(e){var t=this;this.$store.state.potree.file_loading=!0,this.$store.commit("REMOVE_ALL_BASE_POINTS"),this.$store.commit("POTREE_SCENE_CLEAR"),this.$store.dispatch("getPotreeFile",{id:this.file_info.uuid,type:"points",status:e.name}).then(function(){t.$nextTick(function(){t.$store.commit("LOAD_POINT_CLOUD","http://47.113.82.212:8080/static/out/"+t.file_info.uuid+"/cloud.js")})}).catch(function(e){t.$message({message:e,duration:3e3}),t.$store.state.potree.file_loading=!1}).finally(function(){})},getFileInfo:function(e){var t=this;this.$store.dispatch("getFile",e).then(function(){}).catch(function(e){t.$message({message:e,duration:3e3})}).finally(function(){t.loading=!1})},handleSave:function(){var e=this;this.loading=!0,this.file_info.devices=this.device_list,this.$store.dispatch("updateFile",this.file_info).then(function(){}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.loading=!1})},reset:function(){var e=this;for(var t in this.loading=!0,this.file_info.devices=this.device_list,this.file_info.devices)this.file_info.devices[t].status="stop";this.$store.dispatch("updateFile",this.file_info).then(function(){}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.loading=!1})},connect_device:function(){var e=J()(this.current_iot_device),t=JSON.parse(e);this.device_list.push({uuid:"",name:t,product_key:"a1WhMeqbeDT",topic:"",status:"stop",file_id:"",cfg:[0,0,0,0,0,0]})},visible_change:function(e){var t=this;e&&this.$store.dispatch("getAllIotDevice").then(function(){}).catch(function(e){t.$message({message:e,duration:3e3})}).finally(function(){})},handleDelete:function(e){this.device_list.splice(this.device_list.indexOf(e),1)},row_click:function(e){this.device_info=e},scan:function(){var e=this;0!==this.device_list.length?(this.$store.state.potree.file_loading=!0,this.$store.dispatch("setDeviceStatus",{devices:this.device_list,id:this.file_info.uuid,action:"working"}).then(function(t){var i=JSON.parse(t.data.data);e.getFileInfo(i.uuid),e.$message({message:t.status,duration:3e3})}).catch(function(t){e.$message({message:t,duration:3e3})})):this.$message({message:"请配置传感器",duration:3e3})}}},re={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mask,expression:"mask"}]},[i("el-form",{attrs:{inline:!0,size:"mini"}},[i("el-form-item",{attrs:{label:"传感器ID"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":function(t){return e.visible_change(t)}},model:{value:e.current_iot_device,callback:function(t){e.current_iot_device=t},expression:"current_iot_device"}},e._l(e.all_iot_device,function(e){return i("el-option",{key:e,staticStyle:{"font-size":"xx-small"},attrs:{label:e,value:e}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.connect_device}},[e._v("连接")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"96%","margin-bottom":"5px"},attrs:{data:e.device_list,height:"180",stripe:"",size:"mini","highlight-current-row":""},on:{"row-click":e.row_click}},[i("el-table-column",{attrs:{label:"ID号","header-align":"center",align:"center",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n        操作\n      ")]}},{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(i){return e.read(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.row)}}})]}}])})],1),e._v(" "),i("el-form",{staticStyle:{"text-align":"center"},attrs:{"label-position":"left","label-width":"20px",size:"mini",inline:!0}},[i("el-form-item",{attrs:{label:"x",size:"mini"}},[i("el-input",{staticClass:"my_input",attrs:{placeholder:"",type:"number"},model:{value:e.device_info.cfg[0],callback:function(t){e.$set(e.device_info.cfg,0,e._n(t))},expression:"device_info.cfg[0]"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"y",size:"mini"}},[i("el-input",{staticClass:"my_input",attrs:{placeholder:"",type:"number"},model:{value:e.device_info.cfg[1],callback:function(t){e.$set(e.device_info.cfg,1,e._n(t))},expression:"device_info.cfg[1]"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"z",size:"mini"}},[i("el-input",{staticClass:"my_input",attrs:{placeholder:"",type:"number"},model:{value:e.device_info.cfg[2],callback:function(t){e.$set(e.device_info.cfg,2,e._n(t))},expression:"device_info.cfg[2]"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"𝞪",size:"mini"}},[i("el-input",{staticClass:"my_input",attrs:{placeholder:"",type:"number"},model:{value:e.device_info.cfg[3],callback:function(t){e.$set(e.device_info.cfg,3,e._n(t))},expression:"device_info.cfg[3]"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"𝞫",size:"mini"}},[i("el-input",{staticClass:"my_input",attrs:{placeholder:"",type:"number"},model:{value:e.device_info.cfg[4],callback:function(t){e.$set(e.device_info.cfg,4,e._n(t))},expression:"device_info.cfg[4]"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"𝞬",size:"mini"}},[i("el-input",{staticClass:"my_input",attrs:{placeholder:"",type:"number"},model:{value:e.device_info.cfg[5],callback:function(t){e.$set(e.device_info.cfg,5,e._n(t))},expression:"device_info.cfg[5]"}})],1),e._v(" "),i("el-form-item",{attrs:{size:"mini"}},[i("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("复位")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.scan}},[e._v("采集数据")])],1)],1)],1)},staticRenderFns:[]};var ce=i("VU/8")(le,re,!1,function(e){i("gUmO")},"data-v-440545ec",null).exports,ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"text-align":"center"}},[i("el-form",{staticStyle:{"margin-bottom":"10px"},attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.file_info.clip_points,size:"mini",height:"300"}},[i("el-table-column",{attrs:{label:"x","header-align":"center",align:"center",prop:"x"}}),e._v(" "),i("el-table-column",{attrs:{label:"y","header-align":"center",align:"center",prop:"y"}}),e._v(" "),i("el-table-column",{attrs:{label:"z","header-align":"center",align:"center",prop:"z"}})],1)],1),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.select_clip_points}},[e._v("\n    标定\n  ")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.remove_all_clip_points}},[e._v("\n    取消\n  ")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.save}},[e._v("\n    保存\n  ")])],1)},staticRenderFns:[]};var fe=i("VU/8")({name:"Region",props:{current_file_info:{}},computed:{file_info:function(){return this.current_file_info},potree_info:function(){return this.$store.state.potree.viewer}},methods:{save:function(){var e=this;if(0!==this.potree_info.scene.measurements.length){var t=this.potree_info.scene.measurements[0].points;for(var i in this.$store.state.coal.current_file_info.clip_points=[],t)this.$store.state.coal.current_file_info.clip_points.push({x:t[i].position.x.toFixed(2),y:t[i].position.y.toFixed(2),z:t[i].position.z.toFixed(2)})}this.$store.state.potree.file_loading=!0,this.$store.dispatch("updateFile",this.file_info).then(function(){e.$store.dispatch("clip",e.file_info.uuid).then(function(){e.$store.commit("REMOVE_ALL_CLIP_POINTS")}).finally(function(){})}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){})},select_clip_points:function(){this.$store.commit("SELECT_CLIP_POINTS")},remove_all_clip_points:function(){this.$store.commit("REMOVE_ALL_CLIP_POINTS")}}},ue,!1,function(e){i("OG+a")},"data-v-6f2049fb",null).exports,de={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-form",{attrs:{inline:!1,size:"mini","label-position":"left"}},[i("el-form-item",{attrs:{label:"去噪时间"}},[e._v("\n      "+e._s(e.file_info.denoise_time)+"\n    ")]),e._v(" "),i("el-form-item",{attrs:{label:"去噪次数"}},[e._v("\n      "+e._s(e.file_info.denoise_count)+"\n    ")])],1),e._v(" "),i("el-form",{attrs:{inline:!0,size:"mini","label-position":"left"}},[i("el-form-item",{attrs:{label:"设定次数"}},[i("el-input",{attrs:{type:"number"},model:{value:e.file_info.denoise_count_set,callback:function(t){e.$set(e.file_info,"denoise_count_set",t)},expression:"file_info.denoise_count_set"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var _e=i("VU/8")({name:"Denoise",props:{current_file_info:{}},data:function(){return{loading:!1}},computed:{file_info:function(){return this.current_file_info}},methods:{save:function(){var e=this;this.$store.state.potree.file_loading=!0,this.$store.dispatch("updateFile",this.file_info).then(function(){e.$store.dispatch("denoise",e.file_info.uuid).then(function(){}).finally(function(){})}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){})}}},de,!1,function(e){i("SiY2")},"data-v-660cd390",null).exports,me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}]},[t("el-form",{attrs:{inline:!1,size:"mini","label-position":"left"}},[t("el-form-item",{attrs:{label:"建模时间"}},[this._v("\n      "+this._s(this.file_info.mesh_time)+"\n    ")]),this._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:this.save}},[this._v("建模")])],1)],1)],1)},staticRenderFns:[]};var pe=i("VU/8")({name:"Mesh",props:{current_file_info:{}},data:function(){return{loading:!1}},computed:{file_info:function(){return this.current_file_info}},methods:{save:function(){var e=this;this.$store.state.potree.file_loading=!0,this.$store.dispatch("mesh",this.file_info.uuid).then(function(){}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){})}}},me,!1,function(e){i("y9wb")},"data-v-839b1cd6",null).exports,he={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"center"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini",inline:""}},[i("el-form-item",{attrs:{label:"",size:"mini"}},[i("el-radio-group",{attrs:{size:"mini"},on:{change:e.change},model:{value:e.file_info.show_type,callback:function(t){e.$set(e.file_info,"show_type",t)},expression:"file_info.show_type"}},[i("el-radio-button",{attrs:{label:"点云"}}),e._v(" "),i("el-radio-button",{attrs:{label:"网格"}})],1)],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.file_info.base_plane_points,size:"mini",height:"200"}},[i("el-table-column",{attrs:{label:"x","header-align":"center",align:"center",prop:"x"}}),e._v(" "),i("el-table-column",{attrs:{label:"y","header-align":"center",align:"center",prop:"y"}}),e._v(" "),i("el-table-column",{attrs:{label:"z","header-align":"center",align:"center",prop:"z"}})],1),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.select_base_points}},[e._v("\n    标定\n  ")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.remove_all_base_points}},[e._v("\n    取消\n  ")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.save}},[e._v("\n    保存\n  ")])],1)},staticRenderFns:[]};var ve=i("VU/8")({name:"BasePoint",props:{current_file_info:{}},data:function(){return{loading:!1}},computed:{file_info:function(){return this.current_file_info},potree_info:function(){return this.$store.state.potree.viewer}},methods:{read_potree_file:function(e,t,i){var n=this;this.$store.commit("POTREE_SCENE_CLEAR"),this.$store.dispatch("getPotreeFile",{id:e,type:t,status:i}).then(function(){n.$nextTick(function(){"points"===t?(n.$store.commit("LOAD_POINT_CLOUD","http://47.113.82.212:8080/static/out/"+n.file_info.uuid+"/cloud.js"),n.$store.commit("SHOW_BASE_POINTS",n.file_info.base_plane_points)):(n.$store.commit("LOAD_MESH","http://47.113.82.212:8080/static/out/"+n.file_info.uuid+"/mesh.ply"),n.$store.commit("REMOVE_ALL_BASE_POINTS"))})}).catch(function(e){n.$message({message:e,duration:3e3})}).finally(function(){})},save:function(){var e=this;if(0!==this.potree_info.scene.measurements.length){var t=this.potree_info.scene.measurements[0].points;for(var i in this.$store.state.coal.current_file_info.base_plane_points=[],t)this.$store.state.coal.current_file_info.base_plane_points.push({x:t[i].position.x.toFixed(2),y:t[i].position.y.toFixed(2),z:t[i].position.z.toFixed(2)})}this.loading=!0,this.file_info.status="基准面标定",this.$store.dispatch("updateFile",this.file_info).then(function(){}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.loading=!1})},select_base_points:function(){this.$store.commit("SELECT_BASE_POINTS")},remove_all_base_points:function(){this.$store.commit("REMOVE_ALL_BASE_POINTS")},change:function(){this.$store.state.potree.file_loading=!0,"点云"===this.file_info.show_type?this.read_potree_file(this.file_info.uuid,"points","建模"):this.read_potree_file(this.file_info.uuid,"mesh","建模")}}},he,!1,function(e){i("MujW")},"data-v-d3ddd584",null).exports,ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"font-size":"xx-small"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"计算时间"}},[e._v("\n      "+e._s(e.file_info.calculate_time)+"\n    ")]),e._v(" "),i("el-form-item",{attrs:{label:"体积"}},[e._v("\n      "+e._s(Number(e.file_info.volume).toFixed(e.coal_info.display_accuracy))+"\n    ")]),e._v(" "),i("el-form-item",{attrs:{label:"表面积"}},[e._v("\n      "+e._s(Number(e.file_info.surface_areas).toFixed(e.coal_info.display_accuracy))+"\n    ")]),e._v(" "),i("el-form-item",{attrs:{label:"重量"}},[e._v("\n      "+e._s((Number(e.file_info.volume)*Number(e.file_info.density)).toFixed(e.coal_info.display_accuracy))+"\n    ")])],1),e._v(" "),i("el-form",{attrs:{"label-position":"left",size:"mini","label-width":"80px",inline:""}},[i("el-form-item",{attrs:{label:"密度",size:"mini"}},[i("el-input",{attrs:{type:"number"},model:{value:e.file_info.density,callback:function(t){e.$set(e.file_info,"density",t)},expression:"file_info.density"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"",size:"mini"}},[e._v("\n      Kg/立方米\n    ")])],1),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("计算")])],1)},staticRenderFns:[]};var be=i("VU/8")({name:"Calculate",props:{current_file_info:{},current_coal_info:{}},data:function(){return{loading:!1}},computed:{file_info:function(){return this.current_file_info},coal_info:function(){return this.current_coal_info}},methods:{save:function(){var e=this;this.loading=!0,this.$store.dispatch("updateFile",this.file_info).then(function(){e.$store.dispatch("surfacevolume",e.file_info.uuid).then(function(){}).finally(function(){})}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){})}}},ge,!1,function(e){i("+l/j")},"data-v-ef7e3b28",null).exports,ye={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"开始时间",size:"mini"}},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp",placeholder:"选择日期时间"},model:{value:e.coal_info.base_time,callback:function(t){e.$set(e.coal_info,"base_time",t)},expression:"coal_info.base_time"}})],1)])],1),e._v(" "),i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini",inline:""}},[i("el-form-item",{attrs:{label:"运行周期",size:"mini"}},[i("el-input",{attrs:{type:"number"},model:{value:e.coal_info.scan_interval,callback:function(t){e.$set(e.coal_info,"scan_interval",t)},expression:"coal_info.scan_interval"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"80px"},attrs:{label:"",size:"mini"}},[i("el-select",{model:{value:e.coal_info.interval_type,callback:function(t){e.$set(e.coal_info,"interval_type",t)},expression:"coal_info.interval_type"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini",inline:""}},[i("el-form-item",{attrs:{label:"处理方式",size:"mini"}},[i("el-switch",{attrs:{"active-text":"自动","inactive-text":"手动"},model:{value:e.coal_info.auto_scan,callback:function(t){e.$set(e.coal_info,"auto_scan",t)},expression:"coal_info.auto_scan"}})],1)],1),e._v(" "),i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"显示精度",size:"mini"}},[i("el-input",{attrs:{type:"number"},model:{value:e.coal_info.display_accuracy,callback:function(t){e.$set(e.coal_info,"display_accuracy",t)},expression:"coal_info.display_accuracy"}})],1)],1),e._v(" "),i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"显示质量",size:"mini"}},[i("el-input",{attrs:{type:"number"},model:{value:e.coal_info.display_quality,callback:function(t){e.$set(e.coal_info,"display_quality",t)},expression:"coal_info.display_quality"}})],1)],1),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.save}},[e._v("保存设置")])],1)},staticRenderFns:[]};var we=i("VU/8")({name:"ScanCycle",props:{current_coal_info:{}},data:function(){return{loading:!1,options:[{value:"分",label:"分"}]}},computed:{coal_info:function(){return this.current_coal_info}},methods:{save:function(){var e=this;this.loading=!0,null===this.coal_info.base_time||this.coal_info.scan_interval<=0?this.coal_info.auto_scan=!1:this.coal_info.auto_scan=!0,this.$store.dispatch("updateCoalYard",this.coal_info).then(function(){e.$store.commit("setMinNodeSize",e.coal_info.display_quality)}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.loading=!1})}}},ye,!1,function(e){i("2qwd")},"data-v-7704ebe6",null).exports,Se={name:"History",props:{current_coal_info:{}},data:function(){return{loading:!1,date_piker:[(new Date).getTime()-6048e5,(new Date).getTime()],pickerOptions_range:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]}}},computed:{coal_info:function(){return this.current_coal_info}},methods:{formatter:function(e,t,i){return null===i?i:i.toFixed(this.coal_info.display_accuracy)},handleDelete:function(e){},read:function(e){for(var t in this.coal_info.files)e.uuid===this.coal_info.files[t].uuid&&(this.$store.state.coal.current_file_info=this.coal_info.files[t],this.$store.state.coal.update=!0)}},mounted:function(){}},$e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{staticStyle:{"text-align":"center"},attrs:{"label-position":"left","label-width":"80px",size:"mini",inline:""}},[i("el-form-item",{attrs:{label:"时间范围",size:"mini"}},[i("div",{staticClass:"block"},[i("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions_range},model:{value:e.date_piker,callback:function(t){e.date_piker=t},expression:"date_piker"}})],1)]),e._v(" "),i("el-form-item")],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"300",data:e.coal_info.files,stripe:"","highlight-current-row":"",size:"mini"}},[i("el-table-column",{attrs:{label:"时间","header-align":"center",align:"center",prop:"created_time","min-width":"150%"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态","header-align":"center",align:"center",prop:"status"}}),e._v(" "),i("el-table-column",{attrs:{label:"体积","header-align":"center",align:"center",formatter:e.formatter,prop:"volume"}}),e._v(" "),i("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n        操作\n      ")]}},{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"normal",icon:"el-icon-view"},on:{click:function(){return e.read(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"text",size:"normal",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.row)}}})]}}])})],1)],1)},staticRenderFns:[]};var Ee={name:"Config",components:{DeviceInfo:ce,History:i("VU/8")(Se,$e,!1,function(e){i("0urM")},"data-v-3ff45ebe",null).exports,ScanCycle:we,Region:fe,Denoise:_e,Mesh:pe,BasePoint:ve,Calculate:be},data:function(){return{activeStage:"传感器",activeName:"first",loading:!1}},computed:{coal_info:function(){return this.$store.state.coal.current_coal_info},file_info:function(){return this.$store.state.coal.current_file_info},disable:function(){return"等待采集"===this.file_info.status?[!1,!0,!0,!0,!0,!0,!1]:"合并数据"===this.file_info.status?[!1,!1,!0,!0,!0,!0,!1]:"范围标定"===this.file_info.status?[!1,!1,!1,!0,!0,!0,!1]:"去噪"===this.file_info.status?[!1,!1,!1,!1,!0,!0,!1]:"建模"===this.file_info.status?[!1,!1,!1,!1,!1,!0,!1]:"基准面标定"===this.file_info.status?[!1,!1,!1,!1,!1,!1,!1]:"工程计算"===this.file_info.status?[!1,!1,!1,!1,!1,!1,!1]:[!0,!0,!0,!0,!0,!0,!0]}},methods:{read_potree_file:function(e,t,i){var n=this;this.$store.state.potree.file_loading=!0,this.$store.commit("POTREE_SCENE_CLEAR"),this.$store.dispatch("getPotreeFile",{id:e,type:t,status:i}).then(function(){n.$nextTick(function(){"points"===t?n.$store.commit("LOAD_POINT_CLOUD","http://47.113.82.212:8080/static/out/"+n.file_info.uuid+"/cloud.js"):n.$store.commit("LOAD_MESH","http://47.113.82.212:8080/static/out/"+n.file_info.uuid+"/mesh.ply")})}).catch(function(e){n.$store.state.potree.file_loading=!1,n.$message({message:e,duration:3e3})}).finally(function(){})},handleClick_main:function(e){var t=this;"历史数据"===e.label&&(this.$refs.history.loading=!0,this.$store.dispatch("getCoalYard","all").then(function(){}).catch(function(e){t.$message({message:e,duration:3e3})}).finally(function(){t.$refs.history.loading=!1}))},handleClick:function(e){this.$store.commit("REMOVE_ALL_CLIP_POINTS"),"传感器"===e.label&&(this.$refs.device_info.device_list=JSON.parse(J()(this.file_info.devices))),"范围标定"===e.label&&this.read_potree_file(this.file_info.uuid,"points","合并数据"),"去噪"===e.label&&this.read_potree_file(this.file_info.uuid,"points","范围标定"),"建模"===e.label&&this.read_potree_file(this.file_info.uuid,"points","去噪"),"基准面标定"===e.label&&("点云"===this.file_info.show_type?(this.read_potree_file(this.file_info.uuid,"points","建模"),this.$store.commit("SHOW_BASE_POINTS",this.file_info.base_plane_points)):this.read_potree_file(this.file_info.uuid,"mesh","建模")),"工程计算"===e.label&&this.read_potree_file(this.file_info.uuid,"mesh","建模")}}},xe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-collapse",[i("el-collapse-item",{attrs:{id:"coal_config"}},[i("template",{slot:"title"},[i("div",{staticStyle:{"text-align":"center",width:"100%"}},[e._v("\n        工程名称"),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(e.coal_info.name)+")")]),e._v("\n        当前步骤"),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(e.activeStage)+")")]),e._v("\n        创建时间"),i("span",{staticStyle:{color:"red"}},[e._v("("+e._s(e.file_info.created_time)+")")])])]),e._v(" "),i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick_main},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"配置信息",name:"first"}},[i("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeStage,callback:function(t){e.activeStage=t},expression:"activeStage"}},[i("el-tab-pane",{attrs:{label:"传感器",name:"传感器",disabled:this.disable[0]}},[i("device-info",{ref:"device_info",attrs:{current_file_info:e.file_info}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"范围标定",name:"范围标定",disabled:this.disable[1]}},[i("region",{attrs:{current_file_info:e.file_info}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"去噪",name:"去噪",disabled:this.disable[2]}},[i("denoise",{attrs:{current_file_info:e.file_info}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"建模",name:"建模",disabled:this.disable[3]}},[i("mesh",{attrs:{current_file_info:e.file_info}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"基准面标定",name:"基准面标定",disabled:this.disable[4]}},[i("base-point",{attrs:{current_file_info:e.file_info}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"工程计算",name:"工程计算",disabled:this.disable[5]}},[i("calculate",{ref:"calculate",attrs:{current_file_info:e.file_info,current_coal_info:e.coal_info}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"上传周期",name:"上传周期",disabled:this.disable[6]}},[i("scan-cycle",{attrs:{current_coal_info:e.coal_info}})],1)],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"历史数据",name:"second"}},[i("history",{ref:"history",attrs:{current_coal_info:e.coal_info}})],1)],1)],2)],1)},staticRenderFns:[]};var ke=i("VU/8")(Ee,xe,!1,function(e){i("DkGi")},"data-v-34a20cf2",null).exports,Ce={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"20%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",{staticStyle:{color:"#f26235","font-weight":"bolder"},attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-info1"}),e._v("\n    新建工程\n  ")]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"工程名称",size:"mini"}},[i("el-input",{model:{value:e.info.name,callback:function(t){e.$set(e.info,"name",t)},expression:"info.name"}})],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.confirm}},[e._v("添 加")])],1)])},staticRenderFns:[]};var Le={name:"Potree",beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},methods:{resizeHandler:function(){}},mounted:function(){this.$store.commit("INIT_POTREE")}},Oe={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"potree_container",staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},[t("div",{attrs:{id:"potree_render_area"}})])}]};var Te={name:"DebugDialog",data:function(){return{dialogVisible:!1,dialogLoading:!1,current_iot_device:"",cmd:"WorkSwitch",value:"",options:[{value:"WorkSwitch",label:"运行开关"},{value:"扫描间隔",label:"扫描间隔"},{value:"扫描步长",label:"扫描步长"},{value:"最大距离",label:"最大距离"},{value:"积分时间",label:"积分时间"}]}},computed:{all_iot_device:function(){return this.$store.state.device.all_iot_device_list}},methods:{confirm:function(){var e=this,t={name:this.current_iot_device,product_key:"a1WhMeqbeDT",cmd:this.cmd,value:parseInt(this.value)};this.$store.dispatch("test",t).then(function(t){e.$message({message:t.data,duration:3e3})}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.dialogLoading=!1})},visible_change:function(e){var t=this;e&&this.$store.dispatch("getAllIotDevice").then(function(){}).catch(function(e){t.$message({message:e,duration:3e3})}).finally(function(){})},handleClose:function(){this.dialogVisible=!1}}},ze={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",{staticStyle:{color:"#f26235","font-weight":"bolder"},attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-info1"}),e._v("\n    调试小工具\n  ")]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"传感器ID"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":function(t){return e.visible_change(t)}},model:{value:e.current_iot_device,callback:function(t){e.current_iot_device=t},expression:"current_iot_device"}},e._l(e.all_iot_device,function(e){return i("el-option",{key:e,staticStyle:{"font-size":"xx-small"},attrs:{label:e,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"选择指令"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.cmd,callback:function(t){e.cmd=t},expression:"cmd"}},e._l(e.options,function(e){return i("el-option",{key:e.value,staticStyle:{"font-size":"xx-small"},attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"设置值",size:"mini"}},[i("el-input",{attrs:{type:"number"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.confirm}},[e._v("执 行")])],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])},staticRenderFns:[]};var Ae={name:"Main",components:{AddGroupDialog:se,AddCoalDialog:i("VU/8")({name:"AddGroup_Dialog",data:function(){return{dialogVisible:!1,dialogLoading:!1,info:{name:"",group_id:0,density:1,status:"等待采集",clip_points:[],denoise_count:0,denoise_count_set:1,base_plane_points:[],devices:[],show_type:"点云",volume:0,surface_areas:0,interval_type:"分",scan_interval:0,auto_scan:!1,display_accuracy:2,display_quality:10}}},computed:{},methods:{confirm:function(){var e=this;""!==this.info.name?(this.dialogLoading=!0,this.$store.dispatch("addCoalYard",this.info).then(function(){e.$store.commit("POTREE_SCENE_CLEAR"),e.$store.commit("REMOVE_ALL_BASE_POINTS")}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.dialogLoading=!1,e.dialogVisible=!1})):this.$message({message:"工程名称不能为空！",duration:3e3})},handleClose:function(){this.dialogVisible=!1}}},Ce,!1,function(e){i("Xxhy")},"data-v-09961843",null).exports,Potree:i("VU/8")(Le,Oe,!1,function(e){i("K0YA")},"data-v-58460140",null).exports,Config:ke,DebugDialog:i("VU/8")(Te,ze,!1,function(e){i("EI9l")},"data-v-9b921da0",null).exports},data:function(){return{loading:!1}},computed:{group_data:function(){return this.$store.state.coal.group_list},coal_info:function(){return this.$store.state.coal.current_coal_info},file_info:function(){return this.$store.state.coal.current_file_info}},watch:{file_info:function(e){if(this.$refs.coal_config.activeName="first",this.$store.state.coal.update)switch(this.$store.state.coal.update=!1,e.status){case"等待采集":this.$refs.coal_config.activeStage="传感器",this.$refs.coal_config.$refs.device_info.device_list=JSON.parse(J()(this.file_info.devices));break;case"合并数据":this.$refs.coal_config.activeStage="范围标定",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","合并数据");break;case"范围标定":this.$refs.coal_config.activeStage="去噪",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","范围标定");break;case"去噪":this.$refs.coal_config.activeStage="建模",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","去噪");break;case"建模":this.$refs.coal_config.activeStage="基准面标定",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","建模");break;case"基准面标定":this.$refs.coal_config.activeStage="工程计算",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","建模");break;case"工程计算":this.$store.commit("REMOVE_ALL_BASE_POINTS"),this.$store.commit("POTREE_SCENE_CLEAR"),this.$refs.coal_config.read_potree_file(this.file_info.uuid,"mesh","建模"),this.$refs.coal_config.activeStage="工程计算";break;default:this.$store.commit("REMOVE_ALL_BASE_POINTS"),this.$store.commit("POTREE_SCENE_CLEAR")}}},methods:{on_connect:function(){console.log("connected"),this.$store.state.stomp.client.subscribe("/topic/msg",this.callback)},on_error:function(e){this.$message({message:e,duration:3e3}),this.$store.state.potree.file_loading=!1},callback:function(e){var t=e,i=JSON.parse(t.body);if(i.file_id===this.file_info.uuid)switch(i.cmd){case"update_file_info":this.getFileInfo(this.file_info.uuid);break;case"合并完成":this.$refs.coal_config.activeStage="范围标定",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","合并数据");break;case"范围标定完成":this.$refs.coal_config.activeStage="去噪",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","范围标定");break;case"去噪完成":this.$refs.coal_config.activeStage="建模",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","去噪");break;case"建模完成":this.$refs.coal_config.activeStage="基准面标定",this.$refs.coal_config.read_potree_file(this.file_info.uuid,"points","建模");break;case"工程计算完成":this.$refs.coal_config.$refs.calculate.loading=!1}},getFileInfo:function(e){var t=this;this.$store.dispatch("getFile",e).then(function(){}).catch(function(e){t.$message({message:e,duration:3e3})}).finally(function(){t.loading=!1})},test:function(){},debug:function(){this.$refs.debug_dialog.dialogVisible=!0},new_group:function(){this.$refs.add_group_dialog.dialogVisible=!0},getAllGroup:function(){var e=this;this.loading=!0,this.$store.dispatch("getGroup","all").then(function(){}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.loading=!1})},getDefaultCoalYardAndFile:function(){var e=this;this.loading=!0,this.$store.dispatch("getCoalYard","all").then(function(){var t=e.$store.state.coal.coalYard_list;if(0!==t.length){if(e.$store.state.coal.current_coal_info=t[0],e.$store.commit("setMinNodeSize",e.coal_info.display_quality),0!==e.$store.state.coal.current_coal_info.files.length){var i=!0,n=!1,o=void 0;try{for(var a,s=oe()(e.coal_info.files);!(i=(a=s.next()).done);i=!0){var l=a.value;if("工程计算"===l.status)return e.$store.state.coal.current_file_info=l,void(e.$store.state.coal.update=!0)}}catch(e){n=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}e.$store.state.coal.current_file_info=t[0].files[0],e.$store.commit("setMinNodeSize",e.coal_info.display_quality),e.$store.state.coal.update=!0}}else e.$store.state.coal.current_coal_info={},e.$store.state.coal.current_file_info={},e.$refs.coal_config.activeStage="",e.$store.state.coal.update=!0}).catch(function(t){e.$message({message:t,duration:3e3})}).finally(function(){e.loading=!1})},remove:function(e,t){var i=this;this.loading=!0;var n="deleteGroup";"coal_yard"===t.type&&(n="deleteCoalYard"),this.$store.dispatch(n,t.uuid).then(function(){i.$store.commit("POTREE_SCENE_CLEAR"),i.getAllGroup(),i.getDefaultCoalYardAndFile()}).catch(function(e){i.$message({message:e,duration:3e3})}).finally(function(){i.loading=!1})},append:function(e){this.$refs.add_coal_dialog.info.group_id=e.uuid,this.$refs.add_coal_dialog.dialogVisible=!0,this.$refs.coal_config.activeStage=""},read:function(e){var t=this.$store.state.coal.coalYard_list;for(var i in t)if(e.data.uuid===t[i].uuid&&(this.$store.state.coal.current_coal_info=t[i],this.$store.commit("setMinNodeSize",this.coal_info.display_quality),0!==t[i].files.length)){var n=!0,o=!1,a=void 0;try{for(var s,l=oe()(t[i].files);!(n=(s=l.next()).done);n=!0){var r=s.value;if("工程计算"===r.status)return this.$store.state.coal.current_file_info=r,void(this.$store.state.coal.update=!0)}}catch(e){o=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}this.$store.state.coal.current_file_info=t[i].files[0],this.$store.commit("setMinNodeSize",this.coal_info.display_quality),this.$store.state.coal.update=!0}}},mounted:function(){this.getAllGroup(),this.getDefaultCoalYardAndFile(),this.$store.commit("INIT_WS"),this.$store.state.stomp.client.connect("admin","admin",this.on_connect,this.on_error,"/")}},Ne={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-aside",{staticStyle:{"z-index":"1",height:"calc(100vh - 50px)"},attrs:{width:"180px"}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.new_group}},[e._v("\n        添加分组\n      ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.debug}},[e._v("\n        调试工具\n      ")])],1),e._v(" "),i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.group_data,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,o=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(o.name))]),e._v(" "),i("span",["group"===o.type?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(){return e.append(o)}}}):e._e(),e._v(" "),"coal_yard"===o.type?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(){return e.read(n)}}}):e._e(),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-minus"},on:{click:function(){return e.remove(n,o)}}})],1)])}}])})],1),e._v(" "),i("el-main",{staticStyle:{"z-index":"0"}},[i("potree")],1),e._v(" "),i("debug-dialog",{ref:"debug_dialog"}),e._v(" "),i("config",{ref:"coal_config"}),e._v(" "),i("add-coal-dialog",{ref:"add_coal_dialog"}),e._v(" "),i("add-group-dialog",{ref:"add_group_dialog"})],1)},staticRenderFns:[]};var Ie=i("VU/8")(Ae,Ne,!1,function(e){i("8aHH")},"data-v-5380460a",null).exports;n.default.use(s.a);var De=new s.a({routes:[{path:"/",name:"登录",component:u,hidden:!0},{path:"/layout",component:ie,hidden:!0,children:[{path:"main",name:"主页",component:Ie,hidden:!0},{path:"coal_yard_manage",name:"场景管理",hidden:!0},{path:"device_manage",name:"设备管理",hidden:!0},{path:"data_manage",name:"数据管理",hidden:!0},{path:"data_show",name:"数据展示",hidden:!0}]},{path:"/register",component:function(){return i.e(0).then(i.bind(null,"lXzh"))},hidden:!0}]}),Fe=i("zL8q"),Re=i.n(Fe);i("tvR6");n.default.config.productionTip=!1,n.default.use(Re.a),new n.default({el:"#app",router:De,store:Z,components:{App:a},template:"<App/>"})},"OG+a":function(e,t){},QTrw:function(e,t){e.exports=THREE},SiY2:function(e,t){},TZgP:function(e,t){},Xxhy:function(e,t){},ZcVb:function(e,t){},eajV:function(e,t){e.exports={_from:"websocket@latest",_id:"websocket@1.0.31",_inBundle:!1,_integrity:"sha512-VAouplvGKPiKFDTeCCO65vYHsyay8DqoBSlzIO3fayrfOgU94lQN5a1uWVnFrMLceTJw/+fQXR5PGbUVRaHshQ==",_location:"/websocket",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"websocket@latest",name:"websocket",escapedName:"websocket",rawSpec:"latest",saveSpec:null,fetchSpec:"latest"},_requiredBy:["/stompjs"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.31.tgz",_shasum:"e5d0f16c3340ed87670e489ecae6144c79358730",_spec:"websocket@latest",_where:"/Volumes/Work/盛大鹏/front/node_modules/stompjs",author:{name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0","es5-ext":"^0.10.50",nan:"^2.14.0","typedarray-to-buffer":"^3.1.5",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"^4.0.2","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.31"}},gUmO:function(e,t){},hS29:function(e,t){},j19T:function(e,t,i){"use strict";t.a={705200:"success",705100:"注册成功、请登录！",705101:"用户未认证！",705102:"用户名、密码错误！",705103:"邮箱已经被注册！",705104:"认证信息错误或已失效，请重新发送认证邮件！！",705105:"认证成功，欢迎来到Unity 3D！",705106:"登录成功！",705107:"登出成功！",705110:"上传成功！",705111:"上传出错！",705112:"文件名错误！",705120:"获取模型成功！"}},kIzu:function(e,t){},piiL:function(e,t){},tIBG:function(e,t){},tvR6:function(e,t){},w0Q4:function(e,t){},y9wb:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.65551f134f485481c52f.js.map